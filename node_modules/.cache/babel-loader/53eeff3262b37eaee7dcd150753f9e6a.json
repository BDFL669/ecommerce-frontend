{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\ecommerce-project\\\\frontend\\\\src\\\\screens\\\\CartScreen.js\",\n    _s = $RefreshSig$();\n\nimport \"./CartScreen.css\";\nimport { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport StripeCheckout from 'react-stripe-checkout';\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\"; //import \"./styles.css\";\n\ntoast.configure(); // Components\n\nimport CartItem from \"../components/CartItem\"; // Actions\n\nimport { addToCart, removeFromCart } from \"../redux/actions/cartActions\";\n\nconst CartScreen = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart);\n  const {\n    cartItems\n  } = cart;\n  useEffect(() => {}, []);\n\n  const qtyChangeHandler = (id, qty) => {\n    dispatch(addToCart(id, qty));\n  };\n\n  const removeFromCartHandler = id => {\n    dispatch(removeFromCart(id));\n  };\n\n  const getCartCount = () => {\n    return cartItems.reduce((qty, item) => Number(item.qty) + qty, 0);\n  };\n\n  const getCartSubTotal = () => {\n    return cartItems.reduce((price, item) => price + item.price * item.qty, 0).toFixed(2);\n  };\n\n  async function handleToken(token, addresses) {\n    console.log({\n      token,\n      addresses\n    });\n  }\n\n  ;\n  const price = getCartSubTotal(); //console.log(price);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cartscreen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cartscreen__left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Shopping Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Your Cart Is Empty \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            children: \"Go Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this) : cartItems.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n          item: item,\n          qtyChangeHandler: qtyChangeHandler,\n          removeHandler: removeFromCartHandler\n        }, item.product, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cartscreen__right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cartscreen__info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Subtotal (\", getCartCount(), \") items\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"$\", getCartSubTotal()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(StripeCheckout, {\n            stripeKey: \"pk_test_51KNXCBIIQnKtwtkJ7y26OKUg6U2JAlMMqOjcMBn555yuTWEEU24g7Ulgi0dtm0b39QM4mAcfHgcoq9IsfvfcwDOQ00B4JaYIUd\",\n            token: handleToken,\n            billingAddress: true,\n            shippingAddress: true,\n            amount: price * 100,\n            name: \"Books\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Checkout with M-Pesa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(CartScreen, \"1b/6BcrzFg90k2qO1tRu8krUc0E=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = CartScreen;\nexport default CartScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartScreen\");","map":{"version":3,"sources":["C:/Users/user/ecommerce-project/frontend/src/screens/CartScreen.js"],"names":["useEffect","useSelector","useDispatch","Link","StripeCheckout","axios","toast","configure","CartItem","addToCart","removeFromCart","CartScreen","dispatch","cart","state","cartItems","qtyChangeHandler","id","qty","removeFromCartHandler","getCartCount","reduce","item","Number","getCartSubTotal","price","toFixed","handleToken","token","addresses","console","log","length","map","product"],"mappings":";;;;;;AAAA,OAAO,kBAAP;AACA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AAEA,OAAO,uCAAP,C,CACA;;AAEAA,KAAK,CAACC,SAAN,G,CAEA;;AACA,OAAOC,QAAP,MAAqB,wBAArB,C,CAEA;;AACA,SAASC,SAAT,EAAoBC,cAApB,QAA0C,8BAA1C;;AAEA,MAAMC,UAAU,GAAG,MAAM;AAAA;;AACvB,QAAMC,QAAQ,GAAGV,WAAW,EAA5B;AAEA,QAAMW,IAAI,GAAGZ,WAAW,CAAEa,KAAD,IAAWA,KAAK,CAACD,IAAlB,CAAxB;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAgBF,IAAtB;AAEAb,EAAAA,SAAS,CAAC,MAAM,CAAE,CAAT,EAAW,EAAX,CAAT;;AAEA,QAAMgB,gBAAgB,GAAG,CAACC,EAAD,EAAKC,GAAL,KAAa;AACpCN,IAAAA,QAAQ,CAACH,SAAS,CAACQ,EAAD,EAAKC,GAAL,CAAV,CAAR;AACD,GAFD;;AAIA,QAAMC,qBAAqB,GAAIF,EAAD,IAAQ;AACpCL,IAAAA,QAAQ,CAACF,cAAc,CAACO,EAAD,CAAf,CAAR;AACD,GAFD;;AAIA,QAAMG,YAAY,GAAG,MAAM;AACzB,WAAOL,SAAS,CAACM,MAAV,CAAiB,CAACH,GAAD,EAAMI,IAAN,KAAeC,MAAM,CAACD,IAAI,CAACJ,GAAN,CAAN,GAAmBA,GAAnD,EAAwD,CAAxD,CAAP;AACD,GAFD;;AAIA,QAAMM,eAAe,GAAG,MAAM;AAC5B,WAAOT,SAAS,CACbM,MADI,CACG,CAACI,KAAD,EAAQH,IAAR,KAAiBG,KAAK,GAAGH,IAAI,CAACG,KAAL,GAAaH,IAAI,CAACJ,GAD9C,EACmD,CADnD,EAEJQ,OAFI,CAEI,CAFJ,CAAP;AAGD,GAJD;;AAKA,iBAAeC,WAAf,CAA2BC,KAA3B,EAAkCC,SAAlC,EAA6C;AAC5CC,IAAAA,OAAO,CAACC,GAAR,CAAY;AAAEH,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAZ;AACA;;AAAA;AACD,QAAMJ,KAAK,GAAGD,eAAe,EAA7B,CA5BuB,CA6BvB;;AAEA,sBACE;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAGGT,SAAS,CAACiB,MAAV,KAAqB,CAArB,gBACC;AAAA,yDACqB,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADrB;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,GAKCjB,SAAS,CAACkB,GAAV,CAAeX,IAAD,iBACZ,QAAC,QAAD;AAEE,UAAA,IAAI,EAAEA,IAFR;AAGE,UAAA,gBAAgB,EAAEN,gBAHpB;AAIE,UAAA,aAAa,EAAEG;AAJjB,WACOG,IAAI,CAACY,OADZ;AAAA;AAAA;AAAA;AAAA,gBADF,CARJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAoBE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,kCACE;AAAA,qCAAcd,YAAY,EAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA,4BAAKI,eAAe,EAApB;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAKE;AAAA,iCACE,QAAC,cAAD;AACT,YAAA,SAAS,EAAC,6GADD;AAET,YAAA,KAAK,EAAEG,WAFE;AAGT,YAAA,cAAc,MAHL;AAIT,YAAA,eAAe,MAJN;AAKT,YAAA,MAAM,EAAEF,KAAK,GAAG,GALP;AAMT,YAAA,IAAI,EAAC;AANI;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBALF,eAeJ;AAAA,iCACQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADR;AAAA;AAAA;AAAA;AAAA,gBAfI;AAAA;AAAA;AAAA;AAAA;AAAA,cApBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AA4CD,CA3ED;;GAAMd,U;UACaT,W,EAEJD,W;;;KAHTU,U;AA6EN,eAAeA,UAAf","sourcesContent":["import \"./CartScreen.css\";\r\nimport { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport StripeCheckout from 'react-stripe-checkout';\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n//import \"./styles.css\";\r\n\r\ntoast.configure();\r\n\r\n// Components\r\nimport CartItem from \"../components/CartItem\";\r\n\r\n// Actions\r\nimport { addToCart, removeFromCart } from \"../redux/actions/cartActions\";\r\n\r\nconst CartScreen = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems } = cart;\r\n\r\n  useEffect(() => {}, []);\r\n\r\n  const qtyChangeHandler = (id, qty) => {\r\n    dispatch(addToCart(id, qty));\r\n  };\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    dispatch(removeFromCart(id));\r\n  };\r\n\r\n  const getCartCount = () => {\r\n    return cartItems.reduce((qty, item) => Number(item.qty) + qty, 0);\r\n  };\r\n\r\n  const getCartSubTotal = () => {\r\n    return cartItems\r\n      .reduce((price, item) => price + item.price * item.qty, 0)\r\n      .toFixed(2);\r\n  };\r\n  async function handleToken(token, addresses) {\r\n\t  console.log({ token, addresses })\r\n  };\r\n  const price = getCartSubTotal();\r\n  //console.log(price);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"cartscreen\">\r\n        <div className=\"cartscreen__left\">\r\n          <h2>Shopping Cart</h2>\r\n\r\n          {cartItems.length === 0 ? (\r\n            <div>\r\n              Your Cart Is Empty <Link to=\"/\">Go Back</Link>\r\n            </div>\r\n          ) : (\r\n            cartItems.map((item) => (\r\n              <CartItem\r\n                key={item.product}\r\n                item={item}\r\n                qtyChangeHandler={qtyChangeHandler}\r\n                removeHandler={removeFromCartHandler}\r\n              />\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"cartscreen__right\">\r\n          <div className=\"cartscreen__info\">\r\n            <p>Subtotal ({getCartCount()}) items</p>\r\n            <p>${getCartSubTotal()}</p>\r\n          </div>\r\n          <div>\r\n            <StripeCheckout\r\n\t\t\tstripeKey=\"pk_test_51KNXCBIIQnKtwtkJ7y26OKUg6U2JAlMMqOjcMBn555yuTWEEU24g7Ulgi0dtm0b39QM4mAcfHgcoq9IsfvfcwDOQ00B4JaYIUd\" \r\n\t\t\ttoken={handleToken}\r\n\t\t\tbillingAddress\r\n\t\t\tshippingAddress\r\n\t\t\tamount={price * 100}\r\n\t\t\tname=\"Books\"\r\n\t\t\t/>\r\n          </div>\r\n\t\t  <div>\r\n            <button>Checkout with M-Pesa</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CartScreen;\r\n"]},"metadata":{},"sourceType":"module"}